

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Interacting with the Extempore Compiler &mdash; Extempore 0.7.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Extempore 0.7.0 documentation" href="index.html"/>
        <link rel="next" title="Time in Extempore" href="time.html"/>
        <link rel="prev" title="The Extempore philosophy" href="philosophy.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Extempore
          

          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing Extempore</a></li>
<li class="toctree-l1"><a class="reference internal" href="editor-support.html">Text editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="about-this-documentation.html">About this documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Key concepts</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="philosophy.html">The Extempore philosophy</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Interacting with the Extempore Compiler</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running-extempore">Running Extempore</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-the-extempore-compiler">Connecting to the Extempore compiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#evaluating-code">Evaluating code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-power-and-danger-of-caas">The power (and danger) of CaaS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="time.html">Time in Extempore</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-xtlang-interop.html">C-xtlang interop</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheme-xtlang-interop.html">Scheme-xtlang interop</a></li>
<li class="toctree-l1"><a class="reference internal" href="concurrency.html">Concurrency</a></li>
<li class="toctree-l1"><a class="reference internal" href="memory.html">Memory management in Extempore</a></li>
</ul>
<p class="caption"><span class="caption-text">xtlang</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="types.html">xtlang types</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html#primitive-types">Primitive types</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html#aggregate-types">Aggregate types</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html#named-types">Named types</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html#generics">Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="type-inference.html">Type inferencing</a></li>
<li class="toctree-l1"><a class="reference internal" href="best-practices.html">Best practices</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials &amp; Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="audio-signal-processing.html">Audio signal processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="making-an-instrument.html">Making an instrument</a></li>
<li class="toctree-l1"><a class="reference internal" href="note-level-music.html">Playing an instrument</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-lisp-music.html">&#8220;Common Lisp Music&#8221;-style example</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampler.html">Loading and using a sampler</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphics.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="impromptu-users.html">Extempore for Impromptu users</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-help.html">Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Unit testing in Extempore</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Extempore</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Interacting with the Extempore Compiler</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/caas.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interacting-with-the-extempore-compiler">
<h1>Interacting with the Extempore Compiler<a class="headerlink" href="#interacting-with-the-extempore-compiler" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This was once a blog post&#8212;corrections/improvements
welcome.</p>
</div>
<p>The best way to think about programming and evaluating code in Extempore
is to think of it as a <em>compiler-as-a-service</em> (CaaS). The compiler
(provided by the <code class="docutils literal"><span class="pre">extempore</span></code> executable) runs in a shell console, and
you connect to it via a TCP socket connection. When the compiler
receives any code over this connection it compiles and executes it. The
general term for this is &#8216;evaluating&#8217; the code. There are some nuances
to this process, but in general the programmer interacts with a running
Extempore process over a TCP connection.</p>
<p>The &#8216;chunks&#8217; of code (serialised as strings) which are sent to the
xtlang compiler may be anything from small one-liners to whole source
files (via the <code class="docutils literal"><span class="pre">load</span></code> function). The functions and data (often
referred to collectively as the <em>environment</em>) persist for as long as
the <code class="docutils literal"><span class="pre">extempore</span></code> process is running. As discussed in the
<a class="reference internal" href="philosophy.html"><span class="doc">philosophy</span></a> page, the Extempore compiler actually
compiles <em>two</em> languages: Scheme and xtlang (Extempore&#8217;s own
programming language). The process of evaluating them is the
same&#8212;just sending strings to the compiler over the TCP port.</p>
<p>So, to do anything in Extempore you need a text editor which can</p>
<ol class="arabic simple">
<li>open up a TCP connection to the compiler</li>
<li>create a string which represents a valid chunk of Scheme or xtlang
code</li>
<li>send that string over the TCP connection</li>
</ol>
<p>There are already Extempore modes/plugins for Atom, Emacs, vim and
Sublime Text 2 (see <a class="reference internal" href="editor-support.html"><span class="doc">Text editors</span></a>). If you already have a
favourite text editor, then you&#8217;ll probably want to use that one. If
you don&#8217;t, then Atom is probably a good choice, and <a class="reference internal" href="editor-support.html#atom-editor-setup"><span class="std std-ref">setting it
up is pretty easy</span></a> In the end it doesn&#8217;t matter
too much which editor you use, so pick the one that makes you happiest.</p>
<div class="section" id="running-extempore">
<h2>Running Extempore<a class="headerlink" href="#running-extempore" title="Permalink to this headline">¶</a></h2>
<p>Once you&#8217;ve <a class="reference internal" href="quickstart.html"><span class="doc">downloaded and built</span></a> Extempore you&#8217;ll
have an <a class="reference external" href="https://en.wikipedia.org/wiki/Executable">executable</a>, which will be called <code class="docutils literal"><span class="pre">extempore</span></code> on OSX/Linux
or <code class="docutils literal"><span class="pre">extempore.exe</span></code> on Windows.</p>
<p>When you start Extempore, you need to specify an audio device. This is
necessary even if you&#8217;re not planning to do any audio processing or
output, because Extempore&#8217;s internal clock is driven by the audio
device&#8217;s clock. This is a good thing: the audio clock will usually be
more stable and accurate than your computer&#8217;s default system clock,
especially if you&#8217;re using a dedicated external audio interface.</p>
<p>But how do we know what audio device to select? Well, the
<code class="docutils literal"><span class="pre">extempore</span></code> executable takes a command-line argument called
<code class="docutils literal"><span class="pre">--print-devices</span></code>. At a shell prompt, <code class="docutils literal"><span class="pre">cd</span></code> into the extempore
source directory (where the executable will be) and run</p>
<img alt="_images/extempore-print-devices.png" src="_images/extempore-print-devices.png" />
<p>As you can see, running <code class="docutils literal"><span class="pre">extempore</span></code> with the <code class="docutils literal"><span class="pre">--print-devices</span></code>
argument prints a list of all the audio devices (input, output and
duplex) that <a class="reference external" href="http://www.portaudio.com/">PortAudio</a> can find on the system. For example, in the
image there are five devices. Three devices (device index 0 to 2) are
for the built-in soundcard, and two more (device index 3 and 4) are
for <a class="reference external" href="http://code.google.com/p/soundflower/">Soundflower</a>, which is a utility for routing audio between
different applications. Different computers will print different
devices&#8212;that&#8217;s ok.</p>
<p>In this example, you probably want to use the default laptop output,
which is <code class="docutils literal"><span class="pre">audio</span> <span class="pre">device[2]</span></code>. When you run <code class="docutils literal"><span class="pre">extempore</span></code>, then, I want
to pass this device index with the <code class="docutils literal"><span class="pre">--device</span></code> argument. The
<code class="docutils literal"><span class="pre">--device</span></code> argument is optional, if it&#8217;s not supplied then Extempore
will default to using whatever device is found at index 0. But it
doesn&#8217;t hurt to specify it explicitly, just to avoid any surprises.</p>
<img alt="_images/extempore-start.png" src="_images/extempore-start.png" />
<p>After running <code class="docutils literal"><span class="pre">extempore</span></code> with <code class="docutils literal"><span class="pre">--device</span> <span class="pre">2</span></code>, it prints some
information to <code class="docutils literal"><span class="pre">stdout</span></code> (sometimes referred to as the <em>log</em>) about
the device that it&#8217;s using. As you can see, it all looks ok: 2 channels
out, samplerate of 44100Hz. At this point, the <code class="docutils literal"><span class="pre">extempore</span></code> process is
running, and will keep doing so until you kill it.</p>
<p>Also, the compiler prints some information about &#8220;starting up some
processes&#8221;, namely a <code class="docutils literal"><span class="pre">primary</span></code> process on port <code class="docutils literal"><span class="pre">7099</span></code> and a
<code class="docutils literal"><span class="pre">utility</span></code> process on port <code class="docutils literal"><span class="pre">7098</span></code>. These are the TCP ports we&#8217;ll
send our code to. A running Extempore binary can provide <em>multiple</em>
Extempore processes (<em>kindof</em> like POSIX threads) as well as
connecting to multiple other Extempore processes, potentially running
on remote hosts. This forms the basis for Extempore&#8217;s powerful
distributed processing capability. For the moment, though, you don&#8217;t
have to worry about multiple processes, just connect and interact with
the <code class="docutils literal"><span class="pre">primary</span></code> process.</p>
</div>
<div class="section" id="connecting-to-the-extempore-compiler">
<h2>Connecting to the Extempore compiler<a class="headerlink" href="#connecting-to-the-extempore-compiler" title="Permalink to this headline">¶</a></h2>
<p>So far, all the stuff we&#8217;ve done has been in a shell console. The
<code class="docutils literal"><span class="pre">extempore</span></code> process, which provides the Extempore compiler, is just
sitting there idle, waiting to be given some code to evaluate. That&#8217;s
where the text editor part of the equation comes in.</p>
<p>When you open up a file ending in <code class="docutils literal"><span class="pre">.xtm</span></code> (Extempore&#8217;s default file
extension), your <a class="reference internal" href="editor-support.html"><span class="doc">editor</span></a> should detect that
you&#8217;re editing Extempore source code, and load the appropriate
Extempore plugin. Here&#8217;s a (short) example file containing some
Extempore code:</p>
<img alt="_images/text-editor-start.png" src="_images/text-editor-start.png" />
<p>The content of the file is at the top, and I&#8217;ve also included a
representation of the &#8220;echo area&#8221; at the bottom. This is a part of
your editor which displays information about the results of different
editor commands, and may also be where the feedback from the Extempore
compiler is &#8220;echoed&#8221; (printed out). It&#8217;s blank at the moment.</p>
<p>Now that we have</p>
<ul class="simple">
<li>an editor open with some Extempore code</li>
<li>an Extempore (editor) plugin loaded</li>
<li>the <code class="docutils literal"><span class="pre">extempore</span></code> process still running</li>
</ul>
<p>we can open up the TCP connection. In Emacs, this is done with <code class="docutils literal"><span class="pre">M-x</span>
<span class="pre">extempore-connect</span></code>. In Atom, with <code class="docutils literal"><span class="pre">Alt+O</span></code>. In ST2, use the menu
item <code class="docutils literal"><span class="pre">Tools</span> <span class="pre">&gt;</span> <span class="pre">Extempore</span> <span class="pre">&gt;</span> <span class="pre">Connect...</span></code>. The default host and port
arguments will be <code class="docutils literal"><span class="pre">localhost</span></code> and <code class="docutils literal"><span class="pre">7099</span></code> respectively. If the
connection is made successfully, then Extempore will echo back the
string &#8220;Welcome to extempore!&#8221;.</p>
</div>
<div class="section" id="evaluating-code">
<h2>Evaluating code<a class="headerlink" href="#evaluating-code" title="Permalink to this headline">¶</a></h2>
<p>Once everything&#8217;s hooked up, then the compiler is just waiting there for
you to give it some code to evaluate. So, from a &#8216;blank slate&#8217; <code class="docutils literal"><span class="pre">.xtm</span></code>
file, let&#8217;s start with some basic Scheme arithmetic. If you&#8217;re playing
along, you can write <code class="docutils literal"><span class="pre">(+</span> <span class="pre">1</span> <span class="pre">2)</span></code> into your file somewhere.</p>
<p>This is where the &#8216;Compiler as a Service&#8217; (CaaS) thing starts to get
real. Currently, the code <code class="docutils literal"><span class="pre">(+</span> <span class="pre">1</span> <span class="pre">2)</span></code> is just text sitting in your
editor. It won&#8217;t get compiled until you send it for evaluation. The
easiest way to do this is to move your cursor somewhere inside the
code <code class="docutils literal"><span class="pre">(+</span> <span class="pre">1</span> <span class="pre">2)</span></code> and hit <code class="docutils literal"><span class="pre">Alt+S</span></code> (in Atom) or <code class="docutils literal"><span class="pre">C-M-x</span></code> (in Emacs).
In ST2, you have to highlight the code you want to evaluate and hit
<code class="docutils literal"><span class="pre">Ctrl+e</span></code>. This takes the whole expression <code class="docutils literal"><span class="pre">(+</span> <span class="pre">1</span> <span class="pre">2)</span></code> and sends it
(as a string) to the running <code class="docutils literal"><span class="pre">extempore</span></code> compiler.</p>
<img alt="_images/scheme-eval.png" src="_images/scheme-eval.png" />
<p>The orange &#8216;box&#8217; in the diagram indicates code that has been sent for
evaluation. See how the code string (in grey) is sent over the
connection, and the result is sent back (also as a string) and displayed
in the echo area. Nothing is printed in the console where <code class="docutils literal"><span class="pre">extempore</span></code>
is running. Congratulations&#8212;you&#8217;ve just evaluated your first Extempore
code!</p>
<p>We can write some more code to <code class="docutils literal"><span class="pre">bind-val</span></code> a global variable
<code class="docutils literal"><span class="pre">myPI</span></code>, which is an xtlang global variable of <a class="reference internal" href="types.html"><span class="doc">type</span></a> <code class="docutils literal"><span class="pre">double</span></code>. If you evaluate this with <code class="docutils literal"><span class="pre">Alt+S</span></code> or <code class="docutils literal"><span class="pre">C-M-x</span></code> (or
whatever the command is in your editor) then what happens is</p>
<img alt="_images/xtlang-eval-1.png" src="_images/xtlang-eval-1.png" />
<p>One difference from the previous (Scheme) example is that the
<code class="docutils literal"><span class="pre">extempore</span></code> compiler now prints a message to the console: <code class="docutils literal"><span class="pre">Bound</span> <span class="pre">myPI</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">double</span></code>. Evaluating <em>xtlang</em> code will always print a message to
the log about the name and type of the variables. Also, notice how
the string that is echoed back is &#8220;#t&#8221;, which is the Scheme/xtlang
literal for boolean <code class="docutils literal"><span class="pre">true</span></code>. This is what the compiler returns if the
value is &#8216;<code class="docutils literal"><span class="pre">bind-val</span></code>&#8216;ed successfully. It&#8217;s worth observing that
what the <code class="docutils literal"><span class="pre">extempore</span></code> compiler prints to the log isn&#8217;t the same as the
result it echoes back to the editor over the TCP connection.</p>
<p>How about compiling an xtlang closure?</p>
<img alt="_images/xtlang-eval-2.png" src="_images/xtlang-eval-2.png" />
<p><code class="docutils literal"><span class="pre">circle_area</span></code> is an xtlang closure which takes a (<code class="docutils literal"><span class="pre">double</span></code>) argument
representing the radius of a circle and returns the area of that circle
(another <code class="docutils literal"><span class="pre">double</span></code>). It also uses the global variable <code class="docutils literal"><span class="pre">myPI</span></code> which we
evaluated earlier. The closure compiled successfully, and the compiler
prints <code class="docutils literal"><span class="pre">Compiled</span> <span class="pre">circle_area</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">[double,double]*</span></code> to the log. If
there was a problem with the compilation, then the compiler would have
printed a (hopefully helpful) compile error to the log instead.</p>
<p>Let&#8217;s find out the area of a circle of radius <code class="docutils literal"><span class="pre">5.0</span></code> units. We need to
call <code class="docutils literal"><span class="pre">circle_area</span></code> with the argument <code class="docutils literal"><span class="pre">5.0</span></code>.</p>
<img alt="_images/xtlang-eval-3.png" src="_images/xtlang-eval-3.png" />
<p>When we evaluate the <code class="docutils literal"><span class="pre">(circle_area</span> <span class="pre">5.0)</span></code> expression, a couple of
things happen. The code is sent to the compiler, which returns the
value <code class="docutils literal"><span class="pre">78.539816</span></code> to the editor. In addition, a message about
creating a new <a class="reference internal" href="memory.html#memory-doc"><span class="std std-ref">memory zone</span></a> is printed to the log.
That&#8217;s because this is the first time we&#8217;ve <em>called</em> some xtlang code,
and so a memory zone needs to be set up to provide any <code class="docutils literal"><span class="pre">zalloc</span></code>
memory. This zone allocation won&#8217;t happen if we evaluate the same code
again, because the default zone already exists. The compiler in this
&#8216;created default zone&#8217; message is just telling us helpful things about
the state of our Extempore world.</p>
<p>As another example of the difference between the <em>return value</em> of an
xtlang expression and any <em>side effects</em> it may introduce, have a think
about how you would get the circle&#8217;s area printed to the log view,
rather than returned and shown in the echo area.</p>
<p>The answer: we can wrap the call to the <code class="docutils literal"><span class="pre">circle_area</span></code> closure in a
call to <code class="docutils literal"><span class="pre">println</span></code>. <code class="docutils literal"><span class="pre">println</span></code> is a built-in function which prints (to
the log) a string representation of whatever arguments it is passed.</p>
<img alt="_images/xtlang-eval-4.png" src="_images/xtlang-eval-4.png" />
<p>This time, the result (<code class="docutils literal"><span class="pre">78.539816</span></code>) is printed to the log. And the
result returned to the editor is different, too&#8212;it&#8217;s now <code class="docutils literal"><span class="pre">#t</span></code>. That&#8217;s
because the <code class="docutils literal"><span class="pre">println</span></code> function returns a value, indicating whether it
was successful in printing its arguments to the log or not. The actual
<em>printing</em> is a &#8216;side effect&#8217; of the <code class="docutils literal"><span class="pre">println</span></code> function&#8212;behaviour that
happens during the course of the function&#8217;s execution.</p>
<p>As a final basic example, we can send code to the compiler more than
&#8216;one closure at a time&#8217;. Let&#8217;s write another closure, this time for
figuring out the area of a &#8216;doughnut&#8217;</p>
<img alt="_images/doughnut-area.png" src="_images/doughnut-area.png" />
<p>Because we already have a closure (<code class="docutils literal"><span class="pre">circle_area</span></code>) for figuring out the
area of a circle, it makes sense to use that closure in our
<code class="docutils literal"><span class="pre">doughnut_area</span></code> closure. The area of the doughnut is the area of the
outer circle (radius <code class="docutils literal"><span class="pre">r1</span></code>) minus the area of the inner circle (radius
<code class="docutils literal"><span class="pre">r2</span></code>).</p>
<img alt="_images/xtlang-eval-5.png" src="_images/xtlang-eval-5.png" />
<p>See how this time both the definition of the <code class="docutils literal"><span class="pre">doughnut_area</span></code> closure
and the call <code class="docutils literal"><span class="pre">(doughnut_area</span> <span class="pre">5.0</span> <span class="pre">2.5)</span></code> are sent to the compiler in the
same &#8216;chunk&#8217;, meaning that they were both highlighted in the editor
before giving the evaluation command. The results of this evaluation
indicate that the two parts of the code were both evaluated
successfully: the <code class="docutils literal"><span class="pre">doughnut_area</span></code> closure compiled successfully, and
the result <code class="docutils literal"><span class="pre">58.904862</span></code> was returned to the editor.</p>
</div>
<div class="section" id="the-power-and-danger-of-caas">
<h2>The power (and danger) of CaaS<a class="headerlink" href="#the-power-and-danger-of-caas" title="Permalink to this headline">¶</a></h2>
<p>Thus we&#8217;ve only evaluated code in the order it appears
in the file. Closures which use other closures or globals have all
worked fine. But when we kill the <code class="docutils literal"><span class="pre">extempore</span></code> process (i.e. with
<code class="docutils literal"><span class="pre">SIGINT</span></code>), the Extempore environment we&#8217;ve &#8216;built up&#8217; isn&#8217;t saved&#8212;it&#8217;s
destroyed.</p>
<img alt="_images/extempore-restart.png" src="_images/extempore-restart.png" />
<p>After restarting the <code class="docutils literal"><span class="pre">extempore</span></code> process above, and reconnecting the
editor to it, let&#8217;s try compiling the <code class="docutils literal"><span class="pre">doughnut_area</span></code> closure first:</p>
<img alt="_images/xtlang-compile-error.png" src="_images/xtlang-compile-error.png" />
<p>The <code class="docutils literal"><span class="pre">circle_area</span></code> closure isn&#8217;t there anymore, and so the compiler
throws an error (and no value is returned to the editor). Because the
compiler is a &#8216;service&#8217;, it&#8217;ll just evaluate the code and build up the
environment in whatever order you throw code at it. The source code
isn&#8217;t necessarily a linear representation of the evolution of the
environment&#8212;it all depends on the &#8216;evaluation trajectory&#8217; that you take
through the code.</p>
<p>So, if we go back and evaluate all the necessary code, everything works
properly</p>
<img alt="_images/xtlang-eval-6.png" src="_images/xtlang-eval-6.png" />
<p>One other thing you can do is <em>redefine</em> the behaviour of existing
functions and variables. For example, say we wanted to change our
<code class="docutils literal"><span class="pre">circle_area</span></code> function to use an ancient Egyptian approximation for
the area of a circle described on the <a class="reference external" href="http://en.wikipedia.org/wiki/Rhind_papyrus">Rhind papyrus</a> (c. 1800BC).</p>
<p>In the editor, <em>change the code</em> for the <code class="docutils literal"><span class="pre">circle_area</span></code> closure and
re-evaluate:</p>
<img alt="_images/xtlang-eval-7.png" src="_images/xtlang-eval-7.png" />
<p>The result is (slightly) different, but not too far off&#8212;not bad for a
4000 year old formula. But the main thing is that the code to <em>call</em>
<code class="docutils literal"><span class="pre">circle_area</span></code> didn&#8217;t change&#8212;only the definition did. The new closure
definition has to have the same signature as the old one, so that any
code which calls the existing closure will still work ok (type-signature
wise). This re-configurability in the behaviour of the code lies at the
heart of <a class="reference external" href="http://toplap.org">live coding</a>, a practice which has informed much of the
design of Extempore.</p>
<p>This should be a serious challenge to any notion you may have had about
the source code being the canonical definition of how an Extempore
&#8216;program&#8217; behaves. In live programming, the programmer is constantly
both building <em>new</em> code and data structures, and also redefining and
re-evaluating <em>old</em> bits of code to fit better with the current
execution and environmental context. There are lots of deep implications
of this way of thinking about programming, and I won&#8217;t go into them
here, but hopefully this has been helpful for thinking about what
programming in Extempore looks like.</p>
<p>Now, if you want to code everything up in source files which are
evaluated linearly from start to finish (e.g. with a call to <code class="docutils literal"><span class="pre">load</span></code>)
then you can still do that, too. All of the Extempore libraries
(including those for DSP and graphics) work that way, and Extempore
still works great in that paradigm. But you have the ability to dive in
and change things if you need to, and that opens up some interesting
possibilities.</p>
<p>This is really just the tip of the compiler-as-a-service (CaaS)
iceberg. Extempore&#8217;s CaaS will also let you do things like query for all
bound symbols, print all closures of a particular signature type, return
the <a class="reference external" href="http://en.wikipedia.org/wiki/Abstract_syntax_tree">abstract syntax tree</a> of a particular closure, etc… In fact the
Extempore compiler itself is fully runtime modifiable!</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="time.html" class="btn btn-neutral float-right" title="Time in Extempore" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="philosophy.html" class="btn btn-neutral" title="The Extempore philosophy" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Andrew Sorensen.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.7.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>